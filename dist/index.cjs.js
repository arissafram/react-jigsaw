"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("react");var V={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q;function ie(){if(Q)return W;Q=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,n,a){var p=null;if(a!==void 0&&(p=""+a),n.key!==void 0&&(p=""+n.key),"key"in n){a={};for(var S in n)S!=="key"&&(a[S]=n[S])}else a=n;return n=a.ref,{$$typeof:r,type:s,key:p,ref:n!==void 0?n:null,props:a}}return W.Fragment=t,W.jsx=o,W.jsxs=o,W}var U={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee;function ue(){return ee||(ee=1,process.env.NODE_ENV!=="production"&&function(){function r(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===B?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case w:return"Profiler";case d:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList";case N:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case E:return"Portal";case x:return(e.displayName||"Context")+".Provider";case l:return(e._context.displayName||"Context")+".Consumer";case k:var h=e.render;return e=e.displayName,e||(e=h.displayName||h.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return h=e.displayName||null,h!==null?h:r(e.type)||"Memo";case D:h=e._payload,e=e._init;try{return r(e(h))}catch{}}return null}function t(e){return""+e}function o(e){try{t(e);var h=!1}catch{h=!0}if(h){h=console;var P=h.error,A=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return P.call(h,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",A),t(e)}}function s(e){if(e===z)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===D)return"<...>";try{var h=r(e);return h?"<"+h+">":"<...>"}catch{return"<...>"}}function n(){var e=f.A;return e===null?null:e.getOwner()}function a(){return Error("react-stack-top-frame")}function p(e){if(i.call(e,"key")){var h=Object.getOwnPropertyDescriptor(e,"key").get;if(h&&h.isReactWarning)return!1}return e.key!==void 0}function S(e,h){function P(){y||(y=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",h))}P.isReactWarning=!0,Object.defineProperty(e,"key",{get:P,configurable:!0})}function u(){var e=r(this.type);return j[e]||(j[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function m(e,h,P,A,Y,M,J,q){return P=M.ref,e={$$typeof:$,type:e,key:h,props:M,_owner:Y},(P!==void 0?P:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:u}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:J}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:q}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function C(e,h,P,A,Y,M,J,q){var O=h.children;if(O!==void 0)if(A)if(v(O)){for(A=0;A<O.length;A++)R(O[A]);Object.freeze&&Object.freeze(O)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else R(O);if(i.call(h,"key")){O=r(e);var F=Object.keys(h).filter(function(ce){return ce!=="key"});A=0<F.length?"{key: someKey, "+F.join(": ..., ")+": ...}":"{key: someKey}",K[O+A]||(F=0<F.length?"{"+F.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,A,O,F,O),K[O+A]=!0)}if(O=null,P!==void 0&&(o(P),O=""+P),p(h)&&(o(h.key),O=""+h.key),"key"in h){P={};for(var H in h)H!=="key"&&(P[H]=h[H])}else P=h;return O&&S(P,typeof e=="function"?e.displayName||e.name||"Unknown":e),m(e,O,M,Y,n(),P,J,q)}function R(e){typeof e=="object"&&e!==null&&e.$$typeof===$&&e._store&&(e._store.validated=1)}var g=c,$=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.client.reference"),f=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,i=Object.prototype.hasOwnProperty,v=Array.isArray,_=console.createTask?console.createTask:function(){return null};g={"react-stack-bottom-frame":function(e){return e()}};var y,j={},G=g["react-stack-bottom-frame"].bind(g,a)(),Z=_(s(a)),K={};U.Fragment=z,U.jsx=function(e,h,P,A,Y){var M=1e4>f.recentlyCreatedOwnerStacks++;return C(e,h,P,!1,A,Y,M?Error("react-stack-top-frame"):G,M?_(s(e)):Z)},U.jsxs=function(e,h,P,A,Y){var M=1e4>f.recentlyCreatedOwnerStacks++;return C(e,h,P,!0,A,Y,M?Error("react-stack-top-frame"):G,M?_(s(e)):Z)}}()),U}var te;function de(){return te||(te=1,process.env.NODE_ENV==="production"?V.exports=ie():V.exports=ue()),V.exports}var b=de();const oe={board:{className:"",columns:4,height:500,outlineStrokeColor:"#bbb",rows:5,scatterArea:0,showBoardSlotOutlines:!0,snapThreshold:20,width:400},checkLocalStorage:!1,onComplete:()=>{},onRefresh:()=>{},puzzlePiece:{strokeColor:"gold",strokeEnabled:!0},puzzle:{className:"",responsive:!0,timer:{className:"",enabled:!1},refreshButton:{className:"",enabled:!1},rowsAndColumns:{className:"",enabled:!1}}},fe="react-jigsaw",se=2,ae=c.createContext(void 0),pe=r=>{if(typeof window<"u"&&r){const t=localStorage.getItem(fe);if(t){const o=JSON.parse(t);if(typeof o.rows=="number"&&typeof o.columns=="number")return{rows:o.rows,columns:o.columns}}}return{}},me=r=>{const{rows:t,columns:o}=pe(r.checkLocalStorage),[s,n]=c.useState(o??r.columns),[a,p]=c.useState(t??r.rows),[S,u]=c.useState(!0),[m,C]=c.useState(0),R=a*s,E={columns:s,numPieces:R,refreshCount:m,rows:a,timerIsRunning:S,setBoardGrid:(z,d)=>{p(z),n(d),u(!1),setTimeout(()=>u(!0),10)},refreshBoard:()=>{u(!1),C(z=>z+1),setTimeout(()=>u(!0),10)},setTimerIsRunning:u};return b.jsx(ae.Provider,{value:E,children:r.children})},he=()=>{const r=c.useContext(ae);if(!r)throw new Error("usePuzzleContext must be used within a PuzzleProvider");return r},be=(r,t)=>t?{board:{className:t.board?.className??r.board.className,columns:t.board?.columns??r.board.columns,height:t.board?.height??r.board.height,outlineStrokeColor:t.board?.outlineStrokeColor??r.board.outlineStrokeColor,rows:t.board?.rows??r.board.rows,scatterArea:t.board?.scatterArea??r.board.scatterArea,showBoardSlotOutlines:t.board?.showBoardSlotOutlines??r.board.showBoardSlotOutlines,snapThreshold:t.board?.snapThreshold??r.board.snapThreshold,width:t.board?.width??r.board.width},checkLocalStorage:t.checkLocalStorage??r.checkLocalStorage,onComplete:t.onComplete??r.onComplete,onRefresh:t.onRefresh??r.onRefresh,puzzlePiece:{strokeColor:t.puzzlePiece?.strokeColor??r.puzzlePiece.strokeColor,strokeEnabled:t.puzzlePiece?.strokeEnabled??r.puzzlePiece.strokeEnabled},puzzle:{className:t.puzzle?.className??r.puzzle.className,responsive:t.puzzle?.responsive??r.puzzle.responsive,timer:{className:t.puzzle?.timer?.className??r.puzzle.timer.className,enabled:t.puzzle?.timer?.enabled??r.puzzle.timer.enabled},refreshButton:{className:t.puzzle?.refreshButton?.className??r.puzzle.refreshButton.className,enabled:t.puzzle?.refreshButton?.enabled??r.puzzle.refreshButton.enabled},rowsAndColumns:{className:t.puzzle?.rowsAndColumns?.className??r.puzzle.rowsAndColumns.className,enabled:t.puzzle?.rowsAndColumns?.enabled??r.puzzle.rowsAndColumns.enabled}}}:r;function ge({initialX:r,initialY:t,boardRef:o,targetX:s,targetY:n,snapThreshold:a,onSnap:p,onDragStart:S,onDragEnd:u}){const m=c.useRef(null),[C,R]=c.useState({isDragging:!1,x:r,y:t}),[g,$]=c.useState(!1),E=c.useRef(null),z=c.useRef(null),d=c.useCallback((f,i)=>{const v=o.current;if(!v)return{x:f,y:i};const _=v.createSVGPoint();_.x=f,_.y=i;const y=_.matrixTransform(v.getScreenCTM()?.inverse());return{x:y.x,y:y.y}},[o]),w=c.useCallback((f,i)=>Math.hypot(f-s,i-n)<=a?($(!0),R(_=>({..._,x:s,y:n,isDragging:!1})),p?.(),!0):!1,[s,n,a,p]),l=c.useCallback(f=>{const i=E.current;if(!i||!i.isDragging||f.pointerId!==i.pointerId)return;const v=d(f.clientX,f.clientY),_=v.x-i.offsetX,y=v.y-i.offsetY;R(j=>({...j,x:_,y})),f.preventDefault()},[d]);z.current=l;const x=c.useCallback(f=>{const i=E.current;if(!i||!i.isDragging||f.pointerId!==i.pointerId)return;i.isDragging=!1,z.current&&window.removeEventListener("pointermove",z.current),window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",x);const v=m.current;v&&v.hasPointerCapture(f.pointerId)&&v.releasePointerCapture(f.pointerId);const _=d(f.clientX,f.clientY),y=_.x-i.offsetX,j=_.y-i.offsetY;E.current=null,w(y,j)||R(G=>({...G,isDragging:!1})),u(),f.preventDefault()},[d,w,u]),k=c.useCallback(f=>{if(g||!f.isPrimary)return;const i=m.current;if(!i)return;const v=d(f.clientX,f.clientY),_=v.x-C.x,y=v.y-C.y;E.current={offsetX:_,offsetY:y,pointerId:f.pointerId,isDragging:!0},i.setPointerCapture(f.pointerId),z.current&&window.addEventListener("pointermove",z.current,{passive:!1}),window.addEventListener("pointerup",x,{passive:!1}),window.addEventListener("pointercancel",x,{passive:!1}),R(j=>({...j,isDragging:!0})),S(),f.preventDefault()},[g,C.x,C.y,d,x,S]),T=c.useCallback(f=>{f.preventDefault()},[]),I=c.useCallback(f=>{f.preventDefault()},[]),L=c.useCallback(f=>{x(f.nativeEvent)},[x]),D=c.useCallback((f,i)=>{g||R(v=>({...v,x:f,y:i}))},[g]),N=c.useCallback((f,i)=>{g||R(v=>({...v,x:v.x+f,y:v.y+i}))},[g]),B=c.useCallback(()=>g?!1:w(C.x,C.y),[g,C.x,C.y,w]);return{ref:m,dragState:C,isSnapped:g,moveTo:D,moveBy:N,trySnap:B,handlers:{onPointerDown:k,onPointerMove:T,onPointerUp:I,onPointerCancel:L,style:{touchAction:"none",cursor:g?"default":C.isDragging?"grabbing":"grab"}}}}const ve="_puzzlePiece_10f4h_1",Se={puzzlePiece:ve},we=10,ze=({boardHeight:r,boardWidth:t,image:o,pieceIndex:s,initialX:n,initialY:a,path:p,snapThreshold:S,boardRef:u,targetX:m,targetY:C,puzzlePieceOptions:R,onSnap:g,onSnapWithKeyboard:$,registerPieceRef:E,boardSlotKey:z,onDragStart:d,onDragEnd:w})=>{const{ref:l,dragState:x,isSnapped:k,moveBy:T,trySnap:I,handlers:L}=ge({initialX:n,initialY:a,snapThreshold:S,boardRef:u,targetX:m,targetY:C,onSnap:g,onDragStart:d,onDragEnd:w});c.useEffect(()=>(E&&E(z,l.current),()=>{E&&E(z,null)}),[l,E,z]);const D=N=>{if(k)return;const B=we;switch(N.key){case"ArrowUp":N.preventDefault(),T(0,-B);break;case"ArrowDown":N.preventDefault(),T(0,B);break;case"ArrowLeft":N.preventDefault(),T(-B,0);break;case"ArrowRight":N.preventDefault(),T(B,0);break;case"Enter":case" ":{N.preventDefault(),I()&&$&&$();break}}};return c.useEffect(()=>{x.isDragging&&l.current&&l.current.parentNode&&!k&&l.current.parentNode.appendChild(l.current)},[l,x.isDragging,k]),c.useEffect(()=>{if(!x.isDragging&&k&&l.current&&l.current.parentNode){const N=l.current.parentNode;N.firstChild!==l.current&&N.insertBefore(l.current,N.firstChild)}},[l,x.isDragging,k]),b.jsxs("g",{ref:l,transform:k?"":`translate(${x.x},${x.y})`,...L,className:Se.puzzlePiece,tabIndex:k?-1:0,onKeyDown:D,children:[b.jsx("defs",{children:b.jsx("clipPath",{id:`piece-clip-${s}`,children:b.jsx("path",{d:p})})}),b.jsx("image",{href:o,x:0,y:0,width:t,height:r,clipPath:`url(#piece-clip-${s})`,preserveAspectRatio:"xMidYMid slice"}),b.jsx("path",{d:p,fill:"none",stroke:k||!R.strokeEnabled?"":R.strokeColor,strokeWidth:R.strokeEnabled?se:0})]})},Ce=({columns:r,rows:t})=>{const o=[];for(let s=0;s<t;s++){o[s]=[];for(let n=0;n<r;n++){const a=n===r-1?0:(s+n)%2===0?1:-1,p=s===t-1?0:(s+n)%2===0?1:-1,S=n===0?0:-o[s][n-1][1],u=s===0?0:-o[s-1][n][2];o[s][n]=[u,a,p,S]}}return o},le=({col:r,row:t,options:o})=>{const{boardWidth:s,boardHeight:n,rows:a,columns:p,edgeMap:S}=o,u=s/p,m=n/a,C=r*u,R=t*m,[g,$,E,z]=S[t][r],d=Math.min(u,m)/3,w=d/2;let l=`M${C},${R}`;return g===0?l+=` h${u}`:(l+=` h${(u-d)/2}`,l+=` a${w},${w} 0 0 ${g===1?1:0} ${d},0`,l+=` h${(u-d)/2}`),$===0?l+=` v${m}`:(l+=` v${(m-d)/2}`,l+=` a${w},${w} 0 0 ${$===1?1:0} 0,${d}`,l+=` v${(m-d)/2}`),E===0?l+=` h-${u}`:(l+=` h-${(u-d)/2}`,l+=` a${w},${w} 0 0 ${E===1?1:0} -${d},0`,l+=` h-${(u-d)/2}`),z===0?l+=` v-${m}`:(l+=` v-${(m-d)/2}`,l+=` a${w},${w} 0 0 ${z===1?1:0} 0,-${d}`,l+=` v-${(m-d)/2}`),l+=" Z",l},Ee="_boardSlotOutline_mbtg0_1",Re="_snapped_mbtg0_6",re={boardSlotOutline:Ee,snapped:Re},_e=r=>{const{boardPathOptions:t,boardSlots:o,showBoardSlotOutlines:s,snappedPieceIds:n}=r;return s?b.jsx("g",{"data-testid":"board-outlines",children:o.map(({pieceRow:a,pieceCol:p})=>{const S=`${a}-${p}`,u=n.has(S);return b.jsx("path",{"data-testid":`outline-${a}-${p}`,className:`${re.boardSlotOutline} ${u?re.snapped:""}`,d:le({row:a,col:p,options:t}),stroke:t.outlineStrokeColor},`outline-${a}-${p}`)})}):null},Pe=(r,t)=>Array.from({length:r*t},(o,s)=>({pieceRow:Math.floor(s/t),pieceCol:s%t})),xe=r=>{const t=[...r];for(let o=t.length-1;o>0;o--){const s=Math.floor(Math.random()*(o+1));[t[o],t[s]]=[t[s],t[o]]}return t},ke=({boardWidth:r,boardHeight:t,boardSlots:o,pieceHeight:s,pieceWidth:n,scatterArea:a})=>{const p=xe(o),S=r+a*2,u=t+a*2,m=-a,C=-a;return p.map(({pieceRow:R,pieceCol:g})=>{const $=m+Math.random()*(S-n),E=C+Math.random()*(u-s),z=g*n,d=R*s,w=$-z,l=E-d;return{pieceRow:R,pieceCol:g,x:w,y:l}})},$e="_board_13b9q_1",ye={board:$e},Te=r=>{const{boardHeight:t,boardWidth:o,className:s,columns:n,image:a,onPuzzleComplete:p,outlineStrokeColor:S,puzzlePieceOptions:u,rows:m,showBoardSlotOutlines:C,snapThreshold:R,scatterArea:g,onAnyPieceActiveChange:$}=r,E=t/m,z=o/n,[d,w]=c.useState([]),[l,x]=c.useState(new Set),k=c.useRef(null),T=c.useRef(new Map),I=c.useMemo(()=>Ce({rows:m,columns:n}),[m,n]),L=c.useMemo(()=>({boardHeight:t,boardWidth:o,columns:n,edgeMap:I,outlineStrokeColor:S,rows:m}),[t,o,n,I,S,m]),D=c.useMemo(()=>Pe(m,n),[m,n]);c.useEffect(()=>{const i=ke({boardHeight:t,boardWidth:o,boardSlots:D,pieceHeight:E,pieceWidth:z,scatterArea:g});w(i),x(new Set),T.current.clear()},[t,o,D,E,z,g]),c.useEffect(()=>{const i=m*n;l.size===i&&p?.()},[l.size,m,n,p]);const N=i=>{const{pieceRow:v,pieceCol:_}=d[i],y=`${v}-${_}`;x(j=>new Set([...j,y]))},B=i=>{const v=d.find((_,y)=>{const j=`${_.pieceRow}-${_.pieceCol}`;return y!==i&&!l.has(j)});if(v){const _=`${v.pieceRow}-${v.pieceCol}`,y=T.current.get(_);y&&y.focus()}},f=(i,v)=>{v?T.current.set(i,v):T.current.delete(i)};return b.jsxs("svg",{ref:k,className:`${ye.board} ${s}`,"data-testid":"board",height:t,width:o,viewBox:`0 0 ${o} ${t}`,children:[b.jsx(_e,{boardPathOptions:L,boardSlots:D,showBoardSlotOutlines:C,snappedPieceIds:l}),d.map(({pieceRow:i,pieceCol:v,x:_,y},j)=>b.jsx(ze,{boardHeight:t,boardWidth:o,boardSlotKey:`${i}-${v}`,image:a,pieceIndex:j,initialX:_,initialY:y,onSnap:()=>N(j),onSnapWithKeyboard:()=>B(j),path:le({col:v,row:i,options:L}),puzzlePieceOptions:u,registerPieceRef:f,snapThreshold:R,boardRef:k,targetX:v*z/100,targetY:i*E/100,onDragStart:()=>$?.(!0),onDragEnd:()=>$?.(!1)},`${i}-${v}`))]})},Ne="_editRowsColumns_1gi2i_1",je="_inlineNote_1gi2i_51",ne={editRowsColumns:Ne,inlineNote:je},Ae=r=>{const{className:t,currentColumns:o,currentRows:s,onBoardSlotChange:n}=r,[a,p]=c.useState(s.toString()),[S,u]=c.useState(o.toString()),m=parseInt(a)!==s||parseInt(S)!==o,C=parseInt(a)>=2&&parseInt(a)<=10,R=parseInt(S)>=2&&parseInt(S)<=10,g=C&&R&&m;c.useEffect(()=>{p(s.toString()),u(o.toString())},[s,o]);const $=d=>{const w=d.target.value;(w===""||/^\d+$/.test(w))&&p(w)},E=d=>{const w=d.target.value;(w===""||/^\d+$/.test(w))&&u(w)},z=d=>{d.preventDefault(),g&&(localStorage.setItem("react-jigsaw",JSON.stringify({rows:parseFloat(a),columns:parseFloat(S)})),n(parseInt(a),parseInt(S)))};return b.jsxs(b.Fragment,{children:[b.jsxs("form",{"data-testid":"edit-rows-columns",className:`${ne.editRowsColumns} ${t}`,onSubmit:z,children:[b.jsxs("label",{children:["Rows:",b.jsx("input",{type:"text",value:a,onChange:$,placeholder:"2-10"})]}),b.jsxs("label",{children:["Cols:",b.jsx("input",{type:"text",value:S,onChange:E,placeholder:"2-10"})]}),b.jsx("input",{type:"submit",value:"Ok",disabled:!g})]}),b.jsx("span",{className:ne.inlineNote,children:"(Valid numbers: 2-10)"})]})},Oe="_refreshButton_17b0p_1",Ie={refreshButton:Oe},De=r=>{const{className:t,onRefresh:o}=r;return b.jsx("button",{"data-testid":"refresh-button",className:`${Ie.refreshButton} ${t}`,onClick:o,title:"Refresh puzzle",children:b.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:se,strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),b.jsx("path",{d:"M21 3v5h-5"}),b.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),b.jsx("path",{d:"M3 21v-5h5"})]})})},Be="_timer_thvwo_1",Me={timer:Be},Le=r=>{const{className:t,isRunning:o,onTimeUpdate:s}=r,[n,a]=c.useState(0),p=c.useRef(null);c.useEffect(()=>(o?p.current=setInterval(()=>{a(u=>{const m=u+1;return s?.(m),m})},1e3):p.current&&(clearInterval(p.current),p.current=null),()=>{p.current&&clearInterval(p.current)}),[o,s]),c.useEffect(()=>{o&&a(0)},[o]);const S=u=>{const m=Math.floor(u/60),C=u%60;return`${m.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`};return b.jsx("div",{"data-testid":"timer",className:`${Me.timer} ${t}`,children:S(n)})},Ye="_puzzle_c9hl6_1",Fe="_responsive_c9hl6_5",We="_settingsContainer_c9hl6_13",X={puzzle:Ye,responsive:Fe,settingsContainer:We},Ue=r=>{const{image:t,onComplete:o,onRefresh:s,options:n}=r,{columns:a,refreshBoard:p,refreshCount:S,rows:u,setBoardGrid:m,setTimerIsRunning:C,timerIsRunning:R}=he(),[g,$]=c.useState(!1);c.useEffect(()=>{if(!g)return;const k=I=>{I.preventDefault()},T=I=>{I.preventDefault()};return window.addEventListener("touchmove",k,{passive:!1}),window.addEventListener("gesturestart",T,{passive:!1}),()=>{window.removeEventListener("touchmove",k),window.removeEventListener("gesturestart",T)}},[g]);const E=(k,T)=>{m(k,T)},z=()=>{s?.(),p()},d=()=>{C(!1),o?.()},w=n.board.width/n.board.height,l=n.puzzle.responsive?`${X.puzzle} ${X.responsive}`:X.puzzle,x=c.useMemo(()=>({...n.puzzle.responsive?{"--puzzle-aspect-ratio":w.toString()}:{},touchAction:g?"none":void 0,overscrollBehavior:g?"none":void 0}),[n.puzzle.responsive,w,g]);return b.jsxs("div",{"data-testid":"puzzle-content",className:l,style:x,children:[n.puzzle.timer.enabled||n.puzzle.refreshButton.enabled?b.jsxs("div",{className:X.settingsContainer,children:[n.puzzle.timer.enabled&&b.jsx(Le,{className:n.puzzle.timer.className,isRunning:R}),n.puzzle.refreshButton.enabled&&b.jsx(De,{className:n.puzzle.refreshButton.className,onRefresh:z})]}):null,b.jsx(Te,{boardHeight:n.board.height,boardWidth:n.board.width,className:n.board.className,columns:a,image:t,onPuzzleComplete:d,outlineStrokeColor:n.board.outlineStrokeColor,puzzlePieceOptions:n.puzzlePiece,rows:u,scatterArea:n.board.scatterArea,showBoardSlotOutlines:n.board.showBoardSlotOutlines,snapThreshold:n.board.snapThreshold,onAnyPieceActiveChange:$},`${u}-${a}-${S}`),n.puzzle.rowsAndColumns.enabled&&b.jsx("div",{className:X.settingsContainer,children:b.jsx(Ae,{className:n.puzzle.rowsAndColumns.className,currentRows:u,currentColumns:a,onBoardSlotChange:E})})]})},Xe=r=>{const{options:t}=r,o=be(oe,t);return b.jsx(me,{checkLocalStorage:o.checkLocalStorage,columns:o.board.columns,rows:o.board.rows,children:b.jsx(Ue,{...r,options:o})})};exports.DEFAULT_PUZZLE_OPTIONS=oe;exports.Puzzle=Xe;
